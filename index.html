<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>XAUUSD SMC AUTO</title>

<style>
:root{
  --bg:#000;
  --glass:rgba(255,255,255,.08);
  --border:rgba(255,255,255,.18);
  --text:#fff;
  --sub:rgba(255,255,255,.6);
  --bull:#2cff9a;
  --bear:#ff4d4d;
  --wait:#ffd166;
}

*{box-sizing:border-box}

body{
  margin:0;
  background:#000;
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","Segoe UI";
  color:white;
  padding:24px;
}

body::before{
  content:"";
  position:fixed;
  width:500px;height:500px;
  background:radial-gradient(circle,#5ad7ff,transparent 70%);
  filter:blur(150px);
  opacity:.3;
  z-index:-1;
}

.app{
  max-width:1100px;
  margin:auto;
  background:var(--glass);
  backdrop-filter:blur(32px);
  border:1px solid var(--border);
  border-radius:32px;
  padding:28px;
}

header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}

h1{font-size:26px}

.price{
  font-size:22px;
  font-weight:700;
}

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
}

.panel{
  background:rgba(255,255,255,.06);
  border:1px solid var(--border);
  border-radius:22px;
  padding:18px;
}

.panel h3{margin:0 0 12px}

.status{
  font-size:22px;
  font-weight:700;
  text-align:center;
  padding:18px;
  border-radius:18px;
}

.bull{background:var(--bull);color:black}
.bear{background:var(--bear);color:black}
.wait{background:var(--wait);color:black}

.log{
  font-size:14px;
  color:var(--sub);
  line-height:1.6;
}
</style>
</head>

<body>
<div class="app">
  <header>
    <h1>ðŸ“ˆ XAUUSD â€¢ SMC AUTO</h1>
    <div class="price" id="price">Loading...</div>
  </header>

  <div class="grid">
    <div class="panel">
      <h3>ðŸ§  Auto SMC Status</h3>
      <div id="bias" class="status wait">WAIT</div>
    </div>

    <div class="panel">
      <h3>ðŸ“Š Market Structure Log</h3>
      <div id="log" class="log">Menunggu data...</div>
    </div>
  </div>
</div>

<script>
/* ==============================
   ðŸ”‘ MASUKKAN API KEY KAMU
================================ */
const API_KEY = "ISI_API_KEY_KAMU";

/* ==============================
   FETCH GOLD PRICE
================================ */
async function getGold(){
  const url=`https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=XAUUSD&interval=15min&apikey=${API_KEY}`;
  const res=await fetch(url);
  const json=await res.json();
  const data=json["Time Series (15min)"];
  return Object.values(data).map(d=>({
    high:+d["2. high"],
    low:+d["3. low"],
    close:+d["4. close"]
  }));
}

/* ==============================
   SMC ENGINE (LEVEL 1)
================================ */
function analyze(candles){
  const highs=candles.map(c=>c.high);
  const lows=candles.map(c=>c.low);

  const lastClose=candles[0].close;
  const prevHigh=Math.max(...highs.slice(5,15));
  const prevLow=Math.min(...lows.slice(5,15));

  let bias="WAIT";
  let log=[];

  if(lastClose > prevHigh){
    bias="BULLISH";
    log.push("BOS â†‘ (Break High)");
  }
  else if(lastClose < prevLow){
    bias="BEARISH";
    log.push("BOS â†“ (Break Low)");
  }
  else{
    log.push("Range / No Break");
  }

  return {bias,log,lastClose};
}

/* ==============================
   MAIN LOOP
================================ */
async function run(){
  try{
    const candles=await getGold();
    const res=analyze(candles);

    price.textContent=`XAUUSD: ${res.lastClose.toFixed(2)}`;

    if(res.bias==="BULLISH"){
      bias.className="status bull";
      bias.textContent="BULLISH";
    }else if(res.bias==="BEARISH"){
      bias.className="status bear";
      bias.textContent="BEARISH";
    }else{
      bias.className="status wait";
      bias.textContent="WAIT";
    }

    log.innerHTML=res.log.join("<br>");
  }catch{
    log.textContent="API limit / error";
  }
}

run();
setInterval(run,60000); // update tiap 1 menit
</script>
</body>
</html>
